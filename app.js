!function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";console.time("canvas"),i(1),window.hasVal=function(t){return"undefined"!=typeof t&&null!==t},window.$=i(2),i(12)},function(t,e){},function(t,e,i){"use strict";var n=i(3),s=i(4),o=function(){if(0!==arguments.length){if(arguments[0]instanceof n)return arguments[0];var t=arguments;if(t[0]instanceof Element||t[0]===window)return new n(t[0]);if(t[0]instanceof s)return new n(t[0].el);if("string"==typeof t[0]){var e=t[0].trim(),i=void 0,o=!0;return o==e.indexOf(" ")!==-1&&o,o==e.split(".").length>1&&o,o==e.indexOf(">")!==-1&&o,o==e.indexOf(",")!==-1&&o,o?-1!==e.indexOf("#")?i=document.getElementById(e.replace("#","")):-1!==e.indexOf(".")&&(i=document.getElementsByClassName(e.replace(".","")),console.log(i,e)):console.log("query select"),new n(i)}}};t.exports=o},function(t,e){"use strict";function i(){if(1===arguments.length&&arguments[0]&&arguments[0].length)for(var t=0;t<arguments[0].length;t++)hasVal(arguments[0][t])&&this.push(arguments[0][t]);else for(var e=0;e<arguments.length;e++)hasVal(arguments[e])&&this.push(arguments[e])}function n(t,e,i){var n=window===this[0]?"inner":i?"client":"offset";if(!hasVal(e))return this[0][n+t];if("number"==typeof e)for(var s="px",o=0;o<this.length;o++)this[o].style.width=e+s}i.prototype=Object.create(Array.prototype),i.prototype.width=function(t){return n.bind(this)("Width",t)},i.prototype.height=function(t){return n.bind(this)("Height",t)},i.prototype.contentWidth=function(t){return n.bind(this)("Width",t,!0)},i.prototype.contentHeight=function(t){return n.bind(this)("Height",t,!0)},i.prototype.on=function(t,e){var i=t.split(".")[1];t=t.split(".")[0];for(var n=0;n<this.length;n++){if(hasVal(this[n]._events)||Object.defineProperty(this[n],"_events",{value:{},enumerable:!1}),!hasVal(i))return console.error("Event error name");hasVal(this[n]._events[t])||(this[n]._events[t]={}),hasVal(this[n]._events[t][i])?(console.log(this[n]._events[t][i]),console.error("Event wrong name",arguments)):(this[n]._events[t][i]=e.bind(this[n]),this[n].addEventListener(t,this[n]._events[t][i]))}return this},i.prototype.off=function(t){var e=t.split(".")[1];t=t.split(".")[0];for(var i=0;i<this.length;i++)if(hasVal(e))hasVal(this[i]._events)&&hasVal(this[i]._events[t])&&hasVal(this[i]._events[t][e])&&(this[i].removeEventListener(t,this[i]._events[t][e]),delete this[i]._events[t][e]);else if(hasVal(this[i]._events[t])){for(var n in this[n]._events[t])this[n].removeEventListener(t,this[n]._events[t][n]);delete this[i]._events[t]}else for(var s in this[s]._events)hasVal(this[s]._events[s][t])&&(this[s].removeEventListener(s,this[s]._events[s][t]),delete this[s]._events[s][t]);return this},i.prototype.append=function(t){for(var e=0;e<this.length;e++)if(t instanceof Element)this[e].appendChild(t);else for(var i=0;i<t.length;i++)t[i]instanceof Element&&this[e].appendChild(t[i]);return this},t.exports=i},function(t,e,i){"use strict";function n(){this.el=document.createElement(this.$type);for(var t=0;t<arguments.length;t++)this.el.classList.add(arguments[t])}var s=i(5),o=s.defineGetter;o(n.prototype,"parent",function(){return this.el.parentNode}),n.prototype.appendTo=function(t){return t.appendChild(this.el),this},n.prototype.remove=function(){this.el.remove()},n.prototype.addClass=function(t){return this.el.classList.add(t),this},n.prototype.removeClass=function(t){return this.el.classList.remove(t),this},n.prototype.$type="div",t.exports=n},function(t,e,i){"use strict";function n(t){var e=document.createElement("span");e.textContent=t;for(var i=Array.prototype.slice.call(arguments,1),n=0;n<i.length;n++)e.classList.add(i[n]);return e}function s(t){var e=document.createElement("button");e.textContent=t;for(var i=Array.prototype.slice.call(arguments,1),n=0;n<i.length;n++)e.classList.add(i[n]);return e}function o(){for(var t=document.createElement("div"),e=0;e<arguments.length;e++)t.classList.add(arguments[e]);return t}function r(t,e,i){var n=document.createElement("input");n.type="range",n.value=t,n.min=e,n.max=i;for(var s=Array.prototype.slice.call(arguments,2),o=0;o<s.length;o++)n.classList.add(s[o]);return n}function a(t,e,i){Object.defineProperty(t,e,{get:i,enumerable:!0,configurable:!0})}function h(t){return"object"===("undefined"==typeof HTMLElement?"undefined":l(HTMLElement))?t instanceof HTMLElement:t&&"object"===("undefined"==typeof t?"undefined":l(t))&&null!==t&&1===t.nodeType&&"string"==typeof t.nodeName}function c(t){if(!Array.isArray(t))return c.call(this,Array.prototype.slice.call(arguments));var e=t[0],i=!1,n=t[1],s="string"==typeof e?document.createElement(e):e,o=1;if("object"===("undefined"==typeof n?"undefined":l(n))&&null!==n&&!Array.isArray(n)&&!h(n)){for(var r in n)"parent"===r?i=!0:s[r]=n[r];o=2}for(var a=o;a<t.length;a++)h(t[a])?s.appendChild(t[a]):Array.isArray(t[a])?s.appendChild(c(t[a])):s.appendChild(document.createTextNode(t[a]));return i&&n.parent.appendChild(s),s}var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},d=function(t,e){t.imageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e};t.exports={make:c,defineGetter:a,imageSmoothing:d,createBtn:s,createSpan:n,createDiv:o,createInputRange:r,imageSmoothingDisabled:function(t){d(t,!1)},inheritanceObject:function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t}},t.exports.colors=i(6)},function(t,e,i){"use strict";function n(t,e,i){var n=1-(.299*t+.587*e+.114*i)/255;return console.log(n),.5>n}var s=i(7).colors;s.HEX,s.RGBA_PER,s.RGBA,s.ABBR_HEX,s.NAC,s.DEFAULT_COLOR,s.HSL;t.exports={colorIsLight:n}},function(t,e,i){"use strict";var n=document.createElement("img"),s=document.createElement("canvas").getContext("2d"),o=.3;n.addEventListener("load",function(){var t=s.canvas.width=this.width*o,e=s.canvas.height=this.height*o;s.drawImage(this,0,0,this.width,this.height,0,0,t,e)}),s.canvas.img=n,n.src="/assets/images/transparent.png",t.exports={HEIGHT_DEF:20,WIDTH_DEF:20,SCALE_DEF:10,TRANSPARENT_IMG_URL:"/assets/images/transparent.png",TRANSPARENT_IMG:s.canvas,TRANSPARENT_COLOR:"rgba(0, 0, 0, 0)",TRANSPARENT_COLOR_VALUE:"",SIZE_POINTER_DEF:1,COLOR_POINTER_PREW_DEF:"rgba(255, 255, 255, 0.6)",SECOND_COLOR_POINTER_PREW_DEF:"rgba(0, 0, 0, 0.2)",RIGHT_CLICK:3,LEFT_CLICK:1,MIDDLE_CLICK:2,PALETTE:"Palette",FRAMES:"Frames"},t.exports.colors={DEFAULT_COLOR:"#000",RGBA:"rgba",RGBA_PER:"rgbaPer",ABBR_HEX:"abbrHex",HEX:"hex",HSL:"hsl",NAC:"NaC"},t.exports.palette=i(8),t.exports.panels=i(9),t.exports.events=i(10),t.exports.actions=i(11)},function(t,e){"use strict";t.exports={SIZE_COLOR_BLOCK:20,CHANGE_COLOR:"changeColor"},t.exports.picker={R:"R",G:"G",B:"B",A:"A"}},function(t,e){"use strict";t.exports={SNAP:"snap",FLOAT:"float",T:"T",B:"B",L:"L",R:"R",TL:"TL",TR:"TR",BL:"BL",BR:"BR",M:"M"}},function(t,e){"use strict";t.exports={CHANGE_SPRITE:"changeSprite",ADD_FRAME:"addFrame",DELETE_FRAME:"deleteFrame",UPDATE_FRAME:"updateFrame",SELECT_FRAME:"selectFrame",ADD_LAYER:"addLayer",DELETE_LAYER:"deleteLayer",UPDATE_LAYER:"updateLayer",SELECT_LAYER:"selectLayer",SELECT_TOOL:"selectTool",RESIZE_PANEL:"resizePanel"}},function(t,e){"use strict";t.exports={PAINT:"paint"}},function(t,e,i){"use strict";var n=i(13),s=i(27),o=i(31),r=i(25),a=(i(34),i(35)),h=i(16),c=i(23),l=i(36),d=i(39),p=i(40),u=i(41);window.onload=function(){window.Editor=n,s.$add(),h.$add(),r.$add(),o.$add(),a.$add(),c.$add(),u(),l(),d(),p(),n.init()}},function(t,e,i){"use strict";var n=i(7),s=(n.SCALE_DEF,n.WIDTH_DEF),o=n.HEIGHT_DEF,r=(n.PALETTE,n.FRAMES,i(7).panels),a=r.SNAP,h=(r.FLOAT,r.B,r.L),c=r.R,l=r.TL,d=r.TR,p=r.BL,u=r.BR,f=i(7).events,y=(f.CHANGE_SPRITE,f.ADD_FRAME,f.SELECT_FRAME,f.RESIZE_PANEL,i(14)),g=i(20),v=i(15),m={panels:{},addPanel:function(t){this.panels[t.name]=t.appendTo(document.body)},onResizePanel:function(t){t===h||t===l||t===p?this.onResizeL(arguments[1]):(t===c||t==d)&&this.onResizeR(arguments[1])},onResizeL:function(t){for(var e=Object.keys(this.panels),i=0;i<e.length;i++){var n=this.panels[e[i]];n.type!==a||n.position!==h&&n.position!==p&&n.position!==l||n.changeWidth(t)}},onResizeR:function(t){for(var e=Object.keys(this.panels),i=0;i<e.length;i++){var n=this.panels[e[i]];n.type!==a||n.position!==c&&n.position!==u&&n.position!==d||n.changeWidth(t)}},initPanels:function(){for(var t=void 0,e=void 0,i=0,n=Object.keys(this.panels);i<n.length;i++){var s=this.panels[n[i]];t&&s.isLeft()?s.init(t.width,t.height):e&&s.isRight()?s.init(e.width,e.height):s.init(),!t&&s.isLeft()?t={width:s.width,height:100-s.heightPerc}:!e&&s.isRight()&&(e={width:s.width,height:100-s.heightPerc})}},getRightPanels:function(){var t=[];console.log(this.panels);for(var e=0,i=Object.keys(this.panels);e<i.length;e++){var n=this.panels[i[e]];n.isRight()&&t.push(n)}return t},getLeftPanels:function(){for(var t=[],e=0,i=Object.keys(this.panels);e<i.length;e++){var n=this.panels[i[e]];n.isLeft()&&t.push(n)}return t},addTool:function(t){this.panels.Tools.addTool(t)},shortcuts:i(29),events:i(30),init:function(){var t,e,i,n,r,a,h;this.shortcuts.init(),this.initPanels(),i=window.innerHeight/o,e=this.getRightPanels()[0].width,t=this.getLeftPanels()[0].width,n=(window.innerWidth-t-e)/s,r=n>i?i:n,a=Math.round(window.innerWidth/2-r*s/2),h=Math.round(window.innerHeight/2-r*o/2),this.sprite=new g(s,o),this.canvas=new y(this.sprite.frames[0].layers[0],r,new v(a,h)),console.timeEnd("canvas")}};t.exports=m},function(t,e,i){"use strict";function n(t,e,i,n){this.artboard=w,this.parent=document.body,this.artboard.scale=e||p,this.artboard.layer=t,this.artboard.cord=i,this.sizePointer=(n||u)*e,this.init()}var s=i(15),o=Math.floor,r=Math.round,a=i(16),h=i(5),c=h.imageSmoothingDisabled,l=h.make,d=i(7),p=d.SCALE_DEF,u=d.SIZE_POINTER_DEF,f=d.MIDDLE_CLICK,y=d.TRANSPARENT_IMG,g=(d.SECOND_COLOR_POINTER_PREW_DEF,d.RIGHT_CLICK),v=d.LEFT_CLICK,m=d.COLOR_POINTER_PREW_DEF,x=i(7).events,w=(x.SELECT_FRAME,x.SELECT_LAYER,{get width(){return this.layer.width*this.scale},get height(){return this.layer.height*this.scale}});n.prototype={contructor:n,get tool(){return Editor.panels.Tools.currentTool}},n.prototype.init=function(){this.background=l("canvas",{parent:this.parent,className:"background"}).getContext("2d"),this.main=l("canvas",{parent:this.parent,className:"canvas"}).getContext("2d"),this.preview=l("canvas",{parent:this.parent,className:"preview"}).getContext("2d"),y.img.addEventListener("load",this.paintBackground.bind(this)),$(this.preview.canvas).on("mousewheel.canvas",this.onScroll.bind(this)),$(this.preview.canvas).on("mousedown.canvas",this.onMouseDown.bind(this)),$(this.preview.canvas).on("mouseup.canvas",this.onMouseUp.bind(this)),$(this.preview.canvas).on("mousemove.canvas",this.onMouseMove.bind(this)),$(window).on("resize.canvas",this.resize.bind(this)),this.resize()},n.prototype.resize=function(){this.background.canvas.width=this.main.canvas.width=this.preview.canvas.width=window.innerWidth,this.background.canvas.height=this.main.canvas.height=this.preview.canvas.height=window.innerHeight,c(this.main),c(this.preview),c(this.background),this.cleanPrev(),this.cleanMain(),this.cleanBackground(),this.paintBackground(),this.paintMain()},n.prototype.changeLayer=function(t){this.artboard.layer=t,this.paintMain()};var b=void 0;n.prototype.onScroll=function(t){var e=1.06;t.deltaY>0?e=.94:t.deltaY<0&&(e=1.06),b||(b=setTimeout(function(){b=void 0,this.scaleTo(r(this.artboard.scale*e*100)/100)}.bind(this),50))},n.prototype.scaleTo=function(t){1>t||(this.artboard.cord.x+=this.artboard.layer.width*this.artboard.scale/2,this.artboard.cord.y+=this.artboard.layer.height*this.artboard.scale/2,this.sizePointer=this.sizePointer/this.artboard.scale*t,this.artboard.scale=t,this.cleanPrev(),this.artboard.cord.x=this.artboard.cord.x-this.artboard.layer.width*this.artboard.scale/2,this.artboard.cord.y=this.artboard.cord.y-this.artboard.layer.height*this.artboard.scale/2,this.paintMain())},n.prototype.onMouseDown=function(t){return t.preventDefault(),t.which===v?(this.mouseDown=!0,this.cleanPrev(),this.tool.onMouseDown(t)):t.which===f?(t.preventDefault(),this.drag=!0,this.lastDragX=t.clientX,this.lastDragY=t.clientY,this.cleanPrev()):t.which===g&&(this.mouseDown=!0,this.cleanPrev(),this.tool.onMouseDown(t)),!1},n.prototype.onMouseUp=function(t){return t.preventDefault(),t.which===v?(this.mouseDown=!1,this.tool.onMouseUp(t)):t.which===f?this.drag=!1:t.which===g&&(this.mouseDown=!1,this.cleanPrev(),this.tool.onMouseUp(t)),!1},n.prototype.onMouseMove=function(t){if(t.preventDefault(),this.drag){var e=t.clientX-this.lastDragX,i=t.clientY-this.lastDragY;this.lastDragX=t.clientX,this.lastDragY=t.clientY,this.shiftDiff(new s(e,i))}else this.mouseDown?this.tool.onMouseMove(t):this.drawPreview(t);return!1},n.prototype.shiftDiff=function(t){this.artboard.cord.sum(t),this.paintMain()},n.prototype.calculatePosition=function(t,e){t=o((t-this.artboard.cord.x)/this.artboard.scale),e=o((e-this.artboard.cord.y)/this.artboard.scale);var i=this.artboard.layer.width-1,n=this.artboard.layer.height-1,s=0>t?0:t>i?i:t,r=0>e?0:e>n?n:e;return{x:t,y:e,xo:s,yo:r}},n.prototype.cordLayerToPaint=function(t){return t.x=t.x*this.artboard.scale+this.artboard.cord.x,t.y=t.y*this.artboard.scale+this.artboard.cord.y,t},n.prototype.previewAt=function(t,e){t=this.cordLayerToPaint(t),this.preview.fillStyle=e,this.preview.clearRect(t.x,t.y,this.sizePointer,this.sizePointer),this.main.clearRect(t.x,t.y,this.sizePointer,this.sizePointer),this.preview.fillRect(t.x,t.y,this.sizePointer,this.sizePointer)},n.prototype.drawPreview=function(t){this.cleanPrev();var e=new s(Math.floor((t.clientX-this.artboard.cord.x)/this.artboard.scale),Math.floor((t.clientY-this.artboard.cord.y)/this.artboard.scale)),i=new s(e.x*this.artboard.scale+this.artboard.cord.x,e.y*this.artboard.scale+this.artboard.cord.y);this.preview.strokeStyle=m,this.preview.fillStyle=a.getPrimaryColor(),this.preview.strokeRect(i.x-1,i.y-1,this.sizePointer+2,this.sizePointer+2),this.preview.fillRect(i.x,i.y,this.sizePointer,this.sizePointer)},n.prototype.paintMain=function(){var t,e;this.cleanMain(),e=this.artboard.layer.width*this.artboard.scale,t=this.artboard.layer.height*this.artboard.scale,this.paintBackground(),c(this.main),this.main.drawImage(this.artboard.layer.context.canvas,0,0,this.artboard.layer.width,this.artboard.layer.height,this.artboard.cord.x,this.artboard.cord.y,e,t)},n.prototype.paintBackground=function(){this.cleanBackground(),c(this.background);var t=this.background.createPattern(y,"repeat");this.background.rect(this.artboard.cord.x,this.artboard.cord.y,this.artboard.layer.width*this.artboard.scale,this.artboard.layer.height*this.artboard.scale),this.background.fillStyle=t,this.background.fill()},n.prototype.paintAt=function(t,e){t=this.cordLayerToPaint(t),this.main.fillStyle=e,this.main.fillRect(t.x,t.y,this.sizePointer,this.sizePointer)},n.prototype.cleanAt=function(t){t=this.cordLayerToPaint(t),this.main.clearRect(t.x,t.y,this.sizePointer,this.sizePointer)},n.prototype.cleanMain=function(){this.main.clearRect(0,0,this.main.canvas.width,this.main.canvas.height)},n.prototype.cleanBackground=function(){this.background.canvas.width=this.background.canvas.width},n.prototype.cleanPrev=function(){this.preview.clearRect(0,0,this.preview.canvas.width,this.preview.canvas.height)},t.exports=n},function(t,e){"use strict";function i(t,e){this.x=t||0,this.y=e||0}var n,s=Math.abs;i.prototype.less=function(t,e){return 1==arguments.length&&(e=t.y,t=t.x),this.x-=t,this.y-=e,this},i.prototype.sum=function(t,e){return 1==arguments.length&&(e=t.y,t=t.x),this.x+=t,this.y+=e,this},i.prototype.diffAbs=function(t){return{x:s(this.x-t.x),y:s(this.y-t.y),sx:this.x<t.x?1:-1,sy:this.y<t.y?1:-1}},i.prototype.diff=function(t){return{x:this.x-t.x,y:this.y-t.y,sx:this.x<t.x?1:-1,sy:this.y<t.y?1:-1}},i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.importantDiff=function(t){return n=this.diffAbs(t),n.x>1||n.y>1},t.exports=i},function(t,e,i){"use strict";var n=i(17),s=i(5),o=s.make,r=i(15),a=i(7),h=a.TRANSPARENT_COLOR,c=i(7).panels,l=(c.SNAP,c.FLOAT),d=(c.B,c.L,c.R,c.TL,c.TR,c.BL,c.BR,i(7).events.SELECT_TOOL,new n("Tools",l,new r(500,500),60));d.tools={},d.mainInit=function(){var t=i(19);this.el.style["z-index"]="9999";var e=o("div",{parent:this.el,className:"colors"});this.primaryColor=new t(h,!1,35),this.secondaryColor=new t(h,!1,35),this.secondaryColor.appendTo(e).addClass("secondary"),this.primaryColor.appendTo(e).addClass("primary"),this.changePosition(new r(100,100)),this.currentTool=this.tools.pencil;for(var n=0,s=Object.keys(this.tools);n<s.length;n++)this.tools[s[n]].appendTo(this.el)},d.getPrimaryColor=function(){return this.primaryColor.color},d.getSecondColor=function(){return this.secondaryColor.color},d.setPrimaryColor=function(t){return this.primaryColor.changeColor(t),t},d.setSecudaryColor=function(t){return this.secondaryColor.changeColor(t),t},d.changeCurrentTool=function(t){this.lastTool=this.currentTool,this.currentTool=this.tools[t]},d.addTool=function(t){return hasVal(this.tools[t.name])?console.error("Invalid name tool"):void(this.tools[t.name]=t)},t.exports=d},function(t,e,i){"use strict";function n(t,e,i,n,s,o){x.call(this,"panel","panel-"+t.toLowerCase()),this.name=t,this.type=e,this.position=i||new w,this.snapType=o,this.isLeft()||this.isRight()?(this.width=n,this.heightPerc=s):(this.width=n,this.height=s)}var s=i(5),o=s.createDiv,r=s.createSpan,a=s.defineGetter,h=s.inheritanceObject,c=i(7).panels,l=c.SNAP,d=(c.FLOAT,c.T),p=c.B,u=c.L,f=c.R,y=c.TL,g=c.TR,v=c.BL,m=c.BR,x=i(4),w=i(15);i(18);h(n,x),a(n.prototype,"layers",function(){return Editor.canvas.artboard.layer.frame.layers}),a(n.prototype,"frame",function(){return Editor.canvas.artboard.layer.frame}),a(n.prototype,"sprite",function(){return Editor.canvas.artboard.layer.frame.sprite}),n.prototype.heightDragBar=20,n.prototype.init=function(t,e){return this.isLeft()||this.isRight()?(this.heightPerc=e||this.heightPerc,this.width=t||this.width):(this.widthPerc=t||this.widthPerc,this.height=e||this.height),hasVal(this.parent)?(l===this.type?this.setSnapPosition():this.changeSize(this.width,this.height,this.position.x,this.position.y),this.dragBar=o("drag-bar"),this.dragBar.style.height=this.heightDragBar+"px",this.dragBar.appendChild(r(this.name)),this.el.appendChild(this.dragBar),$(this.dragBar).on("mousedown.drag",this.onDragStart.bind(this)),void(hasVal(this.mainInit)&&this.mainInit())):console.error("parent undefined")},n.prototype.isLeft=function(){return this.type===l&&this.snapType===y||this.snapType===v||this.snapType==u},n.prototype.isRight=function(){return this.type===l&&this.snapType===g||this.snapType===m||this.snapType==f},n.prototype.isBottom=function(){return this.type===l&&this.snapType===v||this.snapType===m||this.snapType==p},n.prototype.isTop=function(){return this.type===l&&this.snapType===g||this.snapType===y||this.snapType==d},n.prototype.setSnapPosition=function(){this.el.style.width=this.width+"px",(this.isLeft()||this.isRight())&&(this.height=window.innerHeight*(this.heightPerc/100),this.el.style.height=this.height+"px"),this.isLeft()?(this.el.style.left="0",this.isBottom()?(this.position.y=window.innerHeight-this.height,this.el.style.top=this.position.y+"px"):this.position.y=this.el.style.top=0):this.isRight()&&(this.position.x=window.innerWidth-this.width,this.el.style.left=this.position.x+"px",this.isBottom()?(this.position.y=window.innerHeight-this.height,this.el.style.top=this.position.y+"px"):this.position.y=this.el.style.top=0)},n.prototype.$add=function(){Editor.addPanel(this)},n.prototype.changePosition=function(t){t=t||this.position;var e=this.el.getBoundingClientRect();t.x<0&&(t.x=0),t.x+e.width>window.innerWidth&&(t.x=window.innerWidth-e.width),t.y<0&&(t.y=0),t.y+e.height>window.innerHeight&&(t.y=window.innerHeight-e.height),this.position=t,this.el.style.top=t.y+"px",this.el.style.left=t.x+"px"},n.prototype.onDragStart=function(t){this.type!==l&&(this.offsetDrag=new w(t.offsetX,t.offsetY),$(window).off("mousemove.drag").on("mousemove.drag",this.onDrag.bind(this)).off("mouseup.drag").on("mouseup.drag",this.onDragEnd.bind(this)))},n.prototype.onDragEnd=function(t){$(window).off("mousemove.drag").off("mouseup.drag")},n.prototype.onDrag=function(t){var e=new w(t.clientX,t.clientY);e.less(this.offsetDrag),this.changePosition(e)},n.prototype.onResizeStart=function(t){$(window).off("mousemove.resize").on("mousemove.resize",this.onResize.bind(this)).off("mouseup.resize").on("mouseup.resize",this.onResizeEnd.bind(this)),this.typeResize=t.target.className.replace(/resize-bars|resize-corners/,"").trim()},n.prototype.onResize=function(t){this.type===l&&this.typeResize==this.position},n.prototype.changeSize=function(t,e,i,n){t=t||this.width,e=e||this.height,i=i||this.position.x,n=n||this.position.y,this.minWidth&&e<this.minWidth&&(t=this.minWidth),this.minHeight&&e<this.minHeight&&(e=this.minHeight),0>i&&(i=0),0>n&&(n=0),i>window.innerWidth+t&&(i=window.innerWidth-t),n>window.innerHeight+e&&(n=window.innerHeight-e),this.position=new w(i,n),this.width=t,this.height=e,this.el.style.top=n+"px",this.el.style.left=i+"px",this.el.style.width=t+"px",this.el.style.height=e+"px"},n.prototype.onResizeEnd=function(t){$(window).off("mousemove.resize").off("mouseup.resize")},t.exports=n},function(t,e,i){"use strict";function n(t,e){g.call(this,"resize-bar",e),this.type=e,this.panel=t,this.appendTo(this.panel.el),$(this.el).on("mousedown.resize",this.onResizeStart.bind(this))}var s=i(5),o=(s.createDiv,s.createSpan,s.defineGetter,s.inheritanceObject),r=i(7).panels,a=(r.SNAP,r.FLOAT,r.T),h=r.B,c=r.L,l=r.R,d=r.TL,p=r.TR,u=r.BL,f=r.BR,y=[a,c,h,l],g=i(4),v=i(15);o(n,g),n.prototype.onResizeStart=function(t){this.isResized=!0,$(window).off("mousemove.drag").on("mousemove.drag",this.onResize.bind(this)).off("mouseup.drag").on("mouseup.drag",this.onResizeEnd.bind(this))},n.prototype.onResize=function(t){var e=new v(t.clientX,t.clientY);-1!==y.indexOf(this.type)?this.type==a?this.panel.changeSize(void 0,this.panel.position.y-e.y+this.panel.height,void 0,e.y):this.type==h?this.panel.changeSize(void 0,e.y-this.panel.position.y):this.type==c?this.panel.changeSize(this.panel.position.x-e.x+this.panel.width,void 0,e.x,void 0):this.type==l&&this.panel.changeSize(e.x-this.panel.position.x,void 0):this.type==d?this.panel.changeSize(this.panel.position.x-e.x+this.panel.width,this.panel.position.y-e.y+this.panel.height,e.x,e.y):this.type==p?this.panel.changeSize(e.x-this.panel.position.x,this.panel.position.y-e.y+this.panel.height,void 0,e.y):this.type==f?this.panel.changeSize(e.x-this.panel.position.x,e.y-this.panel.position.y,void 0,void 0):this.type==u&&this.panel.changeSize(this.panel.position.x-e.x+this.panel.width,e.y-this.panel.position.y,e.x,void 0)},n.prototype.onResizeEnd=function(t){$(window).off("mousemove.drag").off("mouseup.drag")},t.exports=n},function(t,e,i){"use strict";function n(t,e,i){s.call(this,"color"),this.color=t,e&&this.el.classList.add("active"),this.colorEl=a(["div",{parent:this.el}]),this.el.style.backgroundImage="url("+c+")",this.colorEl.style.background=t,this.active=e,this.el.style.height=this.el.style.width=(i||f)+"px",$(this.el).on("mousedown.select",this.select.bind(this))}var s=i(4),o=i(5),r=o.inheritanceObject,a=o.make,h=i(7),c=h.TRANSPARENT_IMG_URL,l=h.RIGHT_CLICK,d=h.LEFT_CLICK,p=i(16),u=i(7).palette,f=u.SIZE_COLOR_BLOCK;u.CHANGE_COLOR;r(n,s),n.prototype.select=function(t){console.log("click",t.which),t.which===l?p.setSecudaryColor(this.color):t.which===d&&p.setPrimaryColor(this.color)},n.prototype.changeColor=function(t){this.color=t,this.colorEl.style.background=t},t.exports=n},function(t,e,i){"use strict";function n(t,e){this.width=t,this.height=e,this.frames=[],this.frames.push(new s(this,0,!0)),o.selectSprite(this)}var s=i(21),o=i(27),r=i(7).events;r.ADD_FRAME,r.DELETE_FRAME,r.UPDATE_FRAME,r.SELECT_FRAME;n.prototype.getFrame=function(t){return this.frames[t]},n.prototype.deleteFrame=function(t){if(1==this.frames.length)return alert("can't delete last frames"),!1;var e=this.frames.splice(t,1)[0];return this.reIndexing(),e&&e.index==Editor.canvas.artboard.layer.frame.index&&(this.frames.length<=t&&t--,this.frames[t].select()),!0},n.prototype.reIndexing=function(){for(var t=0;t<this.frames.length;t++)this.frames[t].index=t},n.prototype.paint=function(){},n.prototype.selectFrame=function(t){if(Number.isInteger(t))t=this.frames[t];else if(!(t instanceof s))throw new Error;t.select()},n.prototype.addFrame=function(t,e){var i=!1,n=void 0;t instanceof s?i=!0:Number.isInteger(t)&&(i=!0,t=this.frames[t]),Number.isInteger(e)||(e=i?t.index+1:this.frames.length),n=i?t.clone():new s(this,e,!0),i&&(n.index=e,n.layers=t.cloneLayers(n));var o=this.frames.splice(e);return 0!==o.length?(this.frames=this.frames.concat([n],o),this.reIndexing()):this.frames.push(n),i&&n.init(),n.select(),n.paint(),n},t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n,s){this.sprite=t,this.index=e,this.status=i,this.layers=n||[new a(this,0)],s||this.init()}var s=i(5),o=s.imageSmoothing,r=i(7),a=(r.TRANSPARENT_COLOR,i(22)),h=i(25);i(7).events.UPDATE_FRAME;n.prototype={constructor:n,get canvas(){return Editor.canvas},get imageData(){return this.context.getImageData(0,0,this.sprite.width,this.sprite.height)},get width(){return this.sprite.width},get height(){return this.sprite.height}},n.prototype.init=function(){this.context=document.createElement("canvas").getContext("2d"),o(this.context,!1),this.context.canvas.width=this.sprite.width,this.context.canvas.height=this.sprite.height,h.addPreview(this),this.paint(!0)},n.prototype.deleteLayer=function(t){if(1==this.layers.length)return alert("can't delete last frames"),!1;var e=this.layers.splice(t,1)[0];return this.reIndexing(),e&&e.index==Editor.canvas.artboard.layer.index&&(this.layers.length<=t&&t--,this.layers[t].select()),this.paint(),!0},n.prototype["delete"]=function(){this.sprite.deleteFrame(this.index)&&h.deletePreview(this.index)},n.prototype.reIndexing=function(){for(var t=0;t<this.layers.length;t++)this.layers[t].index=t},n.prototype.cloneLayers=function(t){var e=[];t=t||this;for(var i=0;i<this.layers.length;i++){var n=this.layers[i].clone(t);e.push(n)}return e},n.prototype.selectLayer=function(t){if(Number.isInteger(t))t=this.frames[t];else if(!(t instanceof a))throw new Error;t.select()},n.prototype.select=function(){h.selectFrame(this.index),this.layers[0].select()},n.prototype.clone=function(t){return t=t||this.sprite,new n(t,this.index+1,this.status,this.cloneLayers(),!0)},n.prototype.addLayer=function(t,e){var i=!1,n=void 0;t instanceof a?i=!0:Number.isInteger(t)&&(i=!0,t=this.layers[t]),Number.isInteger(e)||(e=i?t.index+1:this.layers.length),n=i?t.clone():new a(this,e,!0),i&&(n.index=e);var s=this.layers.splice(e);return 0!==s.length?(this.layers=this.layers.concat([n],s),this.reIndexing()):this.layers.push(n),i&&n.init(),n.select(),Layers.updateLayers(),n},n.prototype.getIMG=function(){var t=document.createElement("img");return t.src=this.context.canvas.toDataURL(),t},n.prototype.clean=function(){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height)},n.prototype.paint=function(t){this.clean();for(var e=this.layers.length-1;e>-1;e--){var i=this.layers[e];this.context.drawImage(i.context.canvas,0,0)}h.paintFrame(this.index),this.sprite.paint()},n.prototype.generatePreview=function(t){return this.context},t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){this.frame=t,this.index=e,this.status=i,this.context=n||document.createElement("canvas").getContext("2d"),this.bitmap=new Array(this.frame.width);for(var s=0;s<this.bitmap.length;s++)this.bitmap[s]=new Array(this.frame.height).fill(h);n||this.init()}var s=i(5),o=s.imageSmoothing,r=i(23),a=i(7),h=a.TRANSPARENT_COLOR;n.prototype={constructor:n,get canvas(){return Editor.canvas},get imageData(){return this.context.getImageData(0,0,this.sprite.width,this.sprite.height)},get width(){return this.frame.width},get height(){return this.frame.height},get sprite(){return this.frame.sprite}},n.prototype.init=function(){var t=this.context.getImageData(0,0,this.context.canvas.width,this.context.canvas.height);o(this.context,!1),this.context.canvas.width=this.width,this.context.canvas.height=this.height,this.context.putImageData(t,0,0),r.addPreview(this)},n.prototype["delete"]=function(){this.frame.deleteLayer(this.index)&&r.deletePreview(this.index)},n.prototype.getIMG=function(){var t=document.createElement("img");return t.src=this.context.canvas.toDataURL(),t},n.prototype.clone=function(t){return t=t||this.frame,new n(t,this.index,this.status,this.cloneContext())},n.prototype.select=function(){Editor.canvas.changeLayer(this),r.createPreviewLayer(),r.selectLayer(this.index)},n.prototype.cloneContext=function(){var t=this.context.canvas.cloneNode().getContext("2d");return t.drawImage(this.context.canvas,0,0),t},n.prototype.validCord=function(t){return t.x>=0&&t.x<this.width&&t.y>=0&&t.y<this.height},n.prototype.getColorPixel=function(t){return this.validCord(t)?this.bitmap[t.x][t.y]:void 0},n.prototype.cleanAt=function(t){var e=void 0;return e=this.bitmap[t.x][t.y],this.context.clearRect(t.x,t.y,1,1),this.bitmap[t.x][t.y]=h,this.canvas.cleanAt(t,h),e},n.prototype.fillCleanAt=function(t){var e=void 0;return e=this.bitmap[t.x][t.y],this.context.clearRect(t.x,t.y,1,1),this.bitmap[t.x][t.y]=h,e},n.prototype.fillAt=function(t,e){var i=void 0;return i=this.bitmap[t.x][t.y],this.context.fillStyle=e,this.context.fillRect(t.x,t.y,1,1),this.bitmap[t.x][t.y]=e,i},n.prototype.paintAt=function(t,e){var i=void 0;return i=this.bitmap[t.x][t.y],this.context.fillStyle=e,this.context.fillRect(t.x,t.y,1,1),this.bitmap[t.x][t.y]=e,this.canvas.paintAt(t,e),i},n.prototype.paintStroke=function(t){for(var e=new Array(t.length),i=void 0,n=0;n<e.length;n++)e[n]=[];for(var s=0;s<t.length;s++)for(var o=0;o<t[s].length;o++)(i=t[s][o])&&(i==h?e[s][o]=this.cleanAt({x:s,y:o}):e[s][o]=this.paintAt({x:s,y:o},i));return r.paintLayer(this.index),this.frame.paint(),{layer:this,stroke:e}},n.prototype.generatePreview=function(t){return this.context},t.exports=n},function(t,e,i){"use strict";var n=i(17),s=i(24),o=i(7).panels,r=o.SNAP,a=(o.FLOAT,o.B,o.L,o.R,o.TL,o.TR,o.BL),h=(o.BR,i(5)),c=h.createBtn,l=(h.createSpan,h.make),d=c("add layer","add-layer"),p=new n("Layers",r,void 0,120,void 0,a),u=0,f=[];p.mainInit=function(){this.el.style["z-index"]="9999",this.el.appendChild(d),this.ul=document.createElement("ul"),this.ul=l(["ul",{className:"layers-list",parent:this.el}]),$(d).on("click.add",this.createLayer.bind(this))},p.createLayer=function(){this.frame.addLayer()},p.createPreviewLayer=function(){this.ul.innerHTML="";for(var t=0;t<this.layers.length;t++)f[this.layers[t].index]=new s(this.layers[t]).appendTo(this.ul)},p.deletePreview=function(t){f[t]&&(f[t+1]&&f[t+1].layer.index==t?(f[t].changeLayer(this.layers[t]),this.deletePreview(t+1)):(f[t].remove(),f.splice(t,1)))},p.addPreview=function(t){if(f[t.index]){if(f[t.index].layer.index===t.index)return;f[t.index].changeLayer(t)}else f[t.index]=new s(t).appendTo(this.ul)},p.selectLayer=function(t){f[u]&&f[u].unSelectLayer(),f[t].selectLayer(),u=t},p.updateLayers=function(){this.createPreviewLayer()},p.paintLayer=function(){},t.exports=p},function(t,e,i){"use strict";function n(t,e){this.$type="li",s.call(this,"preview-layer"),this.layer=t,this.layer.selected=e,this.el.textContent="layer "+(this.layer.index+1),this.btnClone=a("button",{parent:this.el},"c"),this.btnDelete=a("button",{parent:this.el},"d"),$(this.btnDelete).on("click.delete",this.onDelete.bind(this)),$(this.btnClone).on("click.clone",this.onClone.bind(this)),$(this.el).on("click.layer",this.onClick.bind(this));
}var s=i(4),o=(i(7).events.SELECT_LAYER,i(5)),r=o.inheritanceObject,a=o.make;r(n,s),n.prototype.onClone=function(t){this.layer.frame.addLayer(this.layer)},n.prototype.onDelete=function(t){this.layer["delete"]()},n.prototype.selectLayer=function(){},n.prototype.unSelectLayer=function(){},n.prototype.changeLayer=function(t){this.layer=t},n.prototype.update=function(){},n.prototype.onClick=function(){this.layer.frame.selectLayer(this.layer)},t.exports=n},function(t,e,i){"use strict";var n=i(17),s=i(5),o=s.make,r=i(7).events,a=(r.ADD_FRAME,r.DELETE_FRAME,r.UPDATE_FRAME,r.SELECT_FRAME,i(7).panels),h=a.SNAP,c=(a.FLOAT,a.B,a.L,a.R,a.TL),l=(a.TR,a.BL,a.BR,i(26)),d=i(15),p=new n("Frames",h,new d(0,0),180,60,c),u=document.createElement("ul"),f=document.createElement("button"),y=[],g=0;f.textContent="add frame",f.classList.add("add-frame"),p.mainInit=function(){o([this.el,f,[u,{id:"preview-frames"}]]),$(f).on("click.add",this.createFrame.bind(this))},p.createFrame=function(){this.sprite.addFrame()},p.changeFrame=function(t,e,i){switch(t){case ADD:this.addFrame(e,i);break;case DELETE:break;case UPDATE:this.updateFrame(e,i)}},p.deletePreview=function(t){y[t]&&(y[t+1]&&y[t+1].frame.index==t?(y[t].changeFrame(this.sprite.frames[t]),this.deletePreview(t+1)):(y[t].remove(),y.splice(t,1)))},p.paintFrame=function(t){y[t].paint()},p.addFrame=function(){console.info("addFrame"),this.sprite.addFrame()},p.selectFrame=function(t){console.log(y,t),y[g]&&y[g].unSelectFrame(),y[t].selectFrame(),g=t},p.addPreview=function(t){if(y[t.index]){if(y[t.index].frame.index===t.index)return;this.addPreview(y[t.index].frame),y[t.index].changeFrame(t)}else y[t.index]=new l(t,t.index==g).appendTo(u)},p.reAppend=function(){for(var t=0;t<y.length;t++)y[t].remove(),y[t].appendTo(u)},t.exports=p},function(t,e,i){"use strict";function n(t,e){this.$type="li",s.call(this,"preview-frame"),this.frame=t,this.selected=e,this.context=document.createElement("canvas").getContext("2d"),this.background=document.createElement("canvas").getContext("2d"),this.btnClone=c("C","btn-clone","btn"),this.btnHidden=c("H","btn-hidden","btn"),this.btnDelete=c("D","btn-delete","btn"),this.spanIndex=l(this.frame.index+1,"index"),this.el.appendChild(this.background.canvas),this.el.appendChild(this.context.canvas),this.el.appendChild(this.btnClone),this.el.appendChild(this.btnHidden),this.el.appendChild(this.btnDelete),this.el.appendChild(this.spanIndex),e&&this.el.classList.add("active"),$(this.el).on("click.frame",this.onClick.bind(this)),$(this.btnDelete).on("click.frame",this.deleteFrame.bind(this)),$(this.btnClone).on("click.frame",this.cloneFrame.bind(this))}var s=i(4),o=(i(7).events.SELECT_FRAME,i(7)),r=o.TRANSPARENT_IMG,a=i(5),h=a.inheritanceObject,c=a.createBtn,l=a.createSpan,d=a.imageSmoothingDisabled;h(n,s),n.prototype.onClick=function(t){this.frame.select()},n.prototype.cloneFrame=function(t){t.stopPropagation(),this.frame.sprite.addFrame(this.frame.index)},n.prototype.deleteFrame=function(t){t.stopPropagation(),this.frame["delete"]()},n.prototype.changeFrame=function(t){this.frame=t,this.paint()},n.prototype.selectFrame=function(){this.selected=!0,this.el.classList.add("active")},n.prototype.unSelectFrame=function(){this.selected=!1,this.el.classList.remove("active")},n.prototype.resize=function(){var t=this.el.clientWidth;this.el.style.height=t+"px",this.frame.width>this.frame.height?(this.background.canvas.width=this.context.canvas.width=t,this.scale=t/this.frame.width,this.background.canvas.height=this.context.canvas.height=this.frame.height*this.scale,this.background.canvas.style.marginTop=this.context.canvas.style.marginTop=(t-this.background.canvas.height)/2+"px"):(this.background.canvas.height=this.context.canvas.height=t,this.scale=t/this.frame.height,this.background.canvas.width=this.context.canvas.width=this.frame.width*this.scale,this.background.canvas.style.marginLeft=this.context.canvas.style.marginLeft=(t-this.background.canvas.width)/2+"px"),this.paintBackground(),this.paint()},n.prototype.paintBackground=function(){var t=this.background.createPattern(r,"repeat");this.background.rect(0,0,this.background.canvas.width,this.background.canvas.height),this.background.fillStyle=t,this.background.fill()},n.prototype.appendTo=function(t){return t.appendChild(this.el),this.resize(),this.el.classList.remove("active"),this.spanIndex.textContent=this.frame.index+1,this},n.prototype.paint=function(){this.clean(),d(this.context),this.context.drawImage(this.frame.context.canvas,0,0,this.frame.width*this.scale,this.frame.height*this.scale)},n.prototype.clean=function(){this.context.clearRect(0,0,this.context.canvas.width,this.context.canvas.height)},t.exports=n},function(t,e,i){"use strict";var n=i(17),s=i(28),o=i(5),r=o.imageSmoothingDisabled,a=o.make,h=i(7).events,c=(h.CHANGE_SPRITE,h.DELETE_FRAME,i(7).panels),l=c.SNAP,d=(c.FLOAT,c.B,c.L,c.R,c.TL,c.TR),p=(c.BL,c.BR,i(7)),u=p.TRANSPARENT_IMG,f=new n("Preview",l,void 0,230,40,d),y=500,g=void 0,v=0;f.mainInit=function(){this.background=a(["canvas",{className:"background"}]).getContext("2d"),this.preview=a(["canvas",{className:"preview"}]).getContext("2d"),this.contentPreview=a(["div",{parent:this.el,className:"content-preview"},this.background.canvas,this.preview.canvas]),this.FPSRange=new s(2,0,12,"FPS",this.changeFPS.bind(this)),this.FPSRange.appendTo(this.el),$(this.preview.canvas).on("click.animator",this.changeStatus.bind(this)),this.start()},f.changeFPS=function(t,e){this.stop(),0!=e&&(y=1e3/e,this.start())},f.paintBackground=function(){var t=this.background.createPattern(u,"repeat");this.background.rect(0,0,this.background.canvas.width,this.background.canvas.height),this.background.fillStyle=t,this.background.fill()},f.selectFrame=function(t){v=0},f.selectSprite=function(t){this.scale,t.width>t.height?this.scale=this.contentPreview.clientWidth/t.width:this.scale=this.contentPreview.clientWidth/t.height,this.background.canvas.width=this.preview.canvas.width=t.width*this.scale,this.background.canvas.height=this.preview.canvas.height=t.height*this.scale,this.background.canvas.style.marginTop=this.preview.canvas.style.marginTop=(this.contentPreview.clientWidth-this.preview.canvas.height)/2+"px",this.background.canvas.style.marginLeft=this.preview.canvas.style.marginLeft=(this.contentPreview.clientWidth-this.preview.canvas.width)/2+"px",this.start(),this.paintBackground()},f.start=function(){this.started||(this.started=!0,g=setInterval(function(){f.loop()},y))},f.changeStatus=function(){console.log(this.started),this.started?this.stop():this.start()},f.stop=function(){this.started=!1,clearInterval(g)},f.loop=function(){v>=Editor.sprite.frames.length-1&&(v=-1),v++,this.clean(),r(this.preview),this.preview.drawImage(Editor.sprite.frames[v].context.canvas,0,0,this.preview.canvas.width,this.preview.canvas.height)},f.clean=function(){this.preview.clearRect(0,0,this.preview.canvas.width,this.preview.canvas.height)},t.exports=f},function(t,e,i){"use strict";function n(t,e,i,n,o){s.call(this),this.value=t,this.max=i,this.min=e,this.type=n,this.input=h(0,this.min,this.max),this.spanName=a(this.type),this.spanValue=a(this.value),this.callback=o,$(this.input).on("input.range"+this.type,this.onChange.bind(this)),this.el.appendChild(this.spanName),this.el.appendChild(this.input),this.el.appendChild(this.spanValue)}var s=i(4),o=i(5),r=o.inheritanceObject,a=o.createSpan,h=o.createInputRange;r(n,s),n.prototype.onChange=function(){this.spanValue.textContent=this.value=this.input.value,this.callback&&this.callback(this.type,this.value)},t.exports=n},function(t,e){"use strict";t.exports={init:function(){$(window).on("keydown.shortcuts",this.onKeydown.bind(this)),$(window).on("keyup.shortcuts",this.onKeyup.bind(this))},onKeydown:function(t){t.keyCode?t.keyCode:t.which;console.log(t.ctrlKey,t.code)},onKeyup:function(t){}}},function(t,e){"use strict";t.exports={}},function(t,e,i){"use strict";var n=i(7),s=n.TRANSPARENT_COLOR,o=n.PALETTE,r=(i(7).palette.CHANGE_COLOR,i(7).panels),a=r.SNAP,h=(r.FLOAT,r.B,r.L,r.R,r.TL,r.TR,r.BL,r.BR),c=i(17),l=i(16),d=(i(15),i(19)),p=i(32),u=document.createElement("div"),f=document.createElement("input"),y=new c(o,a,void 0,300,300,h),g=["rgba(26, 188, 156, 1)","rgba(241, 196, 15, 1)","rgba(52, 152, 219, 1)","rgba(230, 126, 34, 1)","rgba(231, 76, 60, 1)","rgba(189, 195, 199, 1)","rgba(155, 89, 182, 1)","rgba(52, 73, 94, 1)","rgba(127, 140, 141, 1)"];f.classList.add("input-color"),y.mainInit=function(){f.id="palette",this.el.appendChild(u),this.el.appendChild(f),l.setSecudaryColor(s),f.style.background=l.setPrimaryColor(g[0]),this.generateColors(),p.callbackUpdate=this.changeColor,p.appendTo(this.el)},y.generateColors=function(){for(var t=0;t<g.length;t++){var e=new d(g[t],0==t);e.appendTo(u)}},t.exports=y},function(t,e,i){"use strict";var n=i(4),s=i(7).palette.picker,o=s.R,r=s.G,a=s.B,h=s.A,c=i(7).colors.RGBA,l=i(33),d=new n;d.init=function(){return this.rgbaPicker=new l(c,this.onChangeValueRGBAPicker,o,r,a,h),this.rgbaPicker.rangeA.input.min=0,this.rgbaPicker.rangeA.input.max=100,this.rgbaPicker.rangeA.spanValue.textContent=this.rgbaPicker.rangeA.value=this.rgbaPicker.rangeA.input.value=100,this.rgbaPicker.appendTo(this.el),this},d.onChangeValueRGBAPicker=function(){var t=this.rangeA.spanValue.textContent=this.rangeA.value=this.rangeA.input.value/100,e="rgba("+this.rangeR.value+","+this.rangeG.value+","+this.rangeB.value+","+t+")";d.callbackUpdate&&d.callbackUpdate(e)},t.exports=d.init()},function(t,e,i){"use strict";function n(t,e){o.call(this,"picker"),this.name=t+"Picker",this.types=Array.prototype.slice.call(arguments,2);for(var i=0;i<this.types.length;i++){var n=new s(0,0,255,this.types[i],e.bind(this));n.appendTo(this.el),this["range"+this.types[i]]=n}}var s=i(28),o=i(4),r=i(5),a=r.inheritanceObject;a(n,o),t.exports=n},function(t,e,i){"use strict";var n=i(17),s=i(7).panels,o=s.SNAP,r=(s.FLOAT,s.B,s.L,s.R,s.TL,s.TR,s.BL,s.BR),a=i(7).events.CHANGE_SPRITE,h=new n("Info",o,r);h.mainInit=function(){this.el.style["z-index"]="9999",Editor.events.on(a+"."+this.name,this.changeSprite,this)},h.changeSprite=function(t){var e=document.createElement("div");e.textContent="Width: "+t.width,this.el.appendChild(e),e=document.createElement("div"),e.textContent="Height: "+t.height,this.el.appendChild(e),e=document.createElement("div"),e.textContent="Frames: "+t.frames.length,this.el.appendChild(e)},t.exports=h},function(t,e,i){"use strict";var n=i(17),s=i(15),o=i(5),r=o.make,a=i(7).panels,h=(a.SNAP,a.FLOAT),c=(a.B,a.L,a.R,a.TL,a.TR,a.BL,a.BR,i(7).events.CHANGE_SPRITE,new n("Actions",h,new s(700,500),100));c.mainInit=function(){this.el.style["z-index"]="9999",$(r("button",{parent:this.el},"u")).on("click.undo",this.undo.bind(this)),$(r("button",{parent:this.el},"r")).on("click.undo",this.redo.bind(this)),this.elRedo=r("ul",{parent:this.el,className:"list redo"}),this.elUndo=r("ul",{parent:this.el,className:"list undo"})},c.listUndo=[],c.listRedo=[],c.redo=function(t){if(Number.isInteger(t)||(t=0),this.listRedo[t])for(var e=t+1;e>0;--e)this.listRedo[0].execute()},c.undo=function(t){if(Number.isInteger(t)||(t=0),this.listUndo[t])for(var e=t+1;e>0;--e)this.listUndo[0].execute()},c.removeAllRedo=function(t){t=t||this.listRedo.length-1;for(var e=t+1;e>0;--e)this.removeRedo(0)},c.removeRedo=function(t){if(this.listRedo[t]){this.listRedo[t].remove(),this.listRedo.splice(t,1);for(var e=t;e<this.listRedo.length;e++)this.listRedo[e].setIndex(e)}},c.removeUndo=function(t){if(this.listUndo[t]){this.listUndo[t].remove(),this.listUndo.splice(t,1);for(var e=t;e<this.listUndo.length;e++)this.listUndo[e].setIndex(e)}},c.addRedo=function(t){this.listRedo[t.index]?(t.changeEl(this.listRedo[t.index].el),this.listRedo[t.index].newEl(),this.addRedo(this.listRedo[t.index].setIndex(t.index+1)),this.listRedo[t.index]=t):this.listRedo[t.index]=t.init(this.elRedo)},c.addUndo=function(t,e){this.listUndo[t.index]?(t.changeEl(this.listUndo[t.index].el),this.listUndo[t.index].newEl(),this.addUndo(this.listUndo[t.index].setIndex(t.index+1),e),this.listUndo[t.index]=t):(e||this.removeAllRedo(),this.listUndo[t.index]=t.init(this.elUndo))},t.exports=c},function(t,e,i){"use strict";var n=i(37),s=i(7),o=s.RIGHT_CLICK,r=(s.LEFT_CLICK,s.TRANSPARENT_COLOR),a=s.actions,h=i(16),c=i(35),l=(i(15),i(38)),d=new n("bucket"),p=void 0,u=void 0;d.onMouseDown=function(t){if("CANVAS"==t.target.nodeName){this.stroke=new Array(this.layer.width);for(var e=0;e<this.stroke.length;e++)this.stroke[e]=[];var i=this.canvas.calculatePosition(t.clientX,t.clientY);p=t.which===o?h.getSecondColor():h.getPrimaryColor(),u=this.layer.getColorPixel(i),u&&p!==u&&(this.fill(i,p,u,p==r?"fillCleanAt":"fillAt"),this.layer.frame.paint(),c.addUndo(new l(a.PAINT,{layer:this.layer,stroke:this.stroke},0)))}},d.onMouseMove=function(t){},d.onMouseUp=function(t){},t.exports=function(){return Editor.addTool(d)}},function(t,e,i){"use strict";function n(t){this.$type="button",s.call(this,"tool"),this.name=t,this.el.textContent=this.name[0],this.stroke=[],this.el.addEventListener("click",this.select.bind(this))}var s=i(4),o=(i(15),i(16)),r=Math.abs,a=i(7),h=(a.TRANSPARENT_COLOR,i(7).events.SELECT_TOOL,i(5)),c=h.inheritanceObject,l=h.defineGetter;c(n,s),l(n.prototype,"canvas",function(){return Editor.canvas}),l(n.prototype,"layer",function(){return Editor.canvas.artboard.layer}),n.prototype.onMouseUp=function(){},n.prototype.onMouseMove=function(){},n.prototype.onMouseDown=function(){},n.prototype.addPixelStroke=function(t){t&&this.stroke.push(t)},n.prototype.select=function(){o.changeCurrentTool(this.name)},n.prototype.clonePixel=function(t){return{cord:t.cord.clone(),color:t.color}},n.prototype.fill=function(t,e,i,n){var s=[t],o=void 0,r=void 0,a=void 0,h=0,c=[-1,0,1,0],l=[0,1,0,-1];if(i===this.layer.getColorPixel(t)){for(a=this.layer.width*this.layer.height;s.length;){o=s.pop(),this.stroke[o.x][o.y]=this.stroke[o.x][o.y]||this.layer[n]({x:o.x,y:o.y},e);for(var d=0;4>d;d++)r={x:o.x+l[d],y:o.y+c[d]},i===this.layer.getColorPixel(r)&&s.push(r);if(h>4*a)break}Editor.canvas.paintMain()}},n.prototype.lineBetween=function(t,e,i,n,s,o){for(var a,h=r(i-t),c=r(n-e),l=i>t?1:-1,d=n>e?1:-1,p=h-c;t!==i||e!==n;)this.stroke[t][e]=this.stroke[t][e]||this.layer[o]({x:t,y:e},s),a=2*p,a>-c&&(p-=c,t+=l),h>a&&(p+=h,e+=d);this.stroke[t][e]=this.stroke[t][e]||this.layer[o]({x:t,y:e},s)},t.exports=n},function(t,e,i){"use strict";function n(t,e,i,n){this.$type="li",s.call(this,"action"),this.type=t,this.data=e,this.index=i,this.redo=n,$(this.el).on("click.undo",this.onClick.bind(this))}var s=i(4),o=i(35),r=i(5),a=r.inheritanceObject,h=(r.defineGetter,{paint:function(t){return t.layer.paintStroke(t.stroke)}});a(n,s),n.prototype.onClick=function(t){o.undo(this.index)},n.prototype.changeEl=function(t){this.el=t,this.el.textContent=this.type},n.prototype.execute=function(){var t=h[this.type](this.data);this.data=t,this.redo?(o.removeRedo(this.index),this.redo=!1,o.addUndo(this.setIndex(0),!0)):(o.removeUndo(this.index),this.redo=!0,o.addRedo(this.setIndex(0)))},n.prototype.setIndex=function(t){return this.index=t,this},n.prototype.init=function(t){return this.el.textContent=this.type,this.appendTo(t),this},n.prototype.newEl=function(){s.call(this,"action"),$(this.el).on("click.undo",this.onClick.bind(this))},t.exports=n},function(t,e,i){"use strict";var n=i(37),s=Math.abs,o=i(7),r=(o.RIGHT_CLICK,o.LEFT_CLICK,o.TRANSPARENT_COLOR),a=o.actions,h=(i(15),i(38)),c=i(35),l=i(23),d=new n("eraser"),p=void 0;d.onMouseDown=function(t){if("CANVAS"==t.target.nodeName){this.clicked=!0,this.stroke=new Array(this.layer.width);for(var e=0;e<this.stroke.length;e++)this.stroke[e]=[];p=this.canvas.calculatePosition(t.clientX,t.clientY),$(window).on("mouseup.up",this.onMouseUp.bind(this)),$(window).on("mouseout.leave",this.onMouseLeave.bind(this))}},d.onMouseLeave=function(t){var e=t.toElement||t.relatedTarget;if(e===document.children[0]){var i=this.canvas.calculatePosition(t.clientX,t.clientY);p=i}},d.onMouseMove=function(t){if(this.clicked){var e=this.canvas.calculatePosition(t.clientX,t.clientY);(this.layer.validCord(e)||this.layer.validCord(p))&&(s(p.yo-e.yo)>1||s(p.xo-e.xo)>1?this.lineBetween(p.xo,p.yo,e.xo,e.yo,r,"cleanAt"):this.stroke[e.xo][e.yo]||r===this.layer.getColorPixel(e)||(this.stroke[e.xo][e.yo]=this.layer.cleanAt({x:e.xo,y:e.yo},r))),p=e}},d.onMouseUp=function(t){$(window).off("mouseup.up"),$(window).off("mouseout.leave"),this.clicked&&(this.clicked=!1,p=void 0,l.paintLayer(this.layer.index),this.layer.frame.paint(),c.addUndo(new h(a.PAINT,{layer:this.layer,stroke:this.stroke},0)))},t.exports=function(){return Editor.addTool(d)}},function(t,e,i){"use strict";var n=i(37),s=i(7),o=s.RIGHT_CLICK,r=(s.LEFT_CLICK,s.TRANSPARENT_COLOR,i(15),i(16)),a=new n("pick");a.onMouseDown=function(t){if("CANVAS"==t.target.nodeName){var e=this.canvas.calculatePosition(t.clientX,t.clientY);e.color=this.layer.getColorPixel(e),t.which===o?r.setSecudaryColor(e.color):r.setPrimaryColor(e.color),r.lastTool.select()}},t.exports=function(){return Editor.addTool(a)}},function(t,e,i){"use strict";var n=i(37),s=i(7),o=(s.MIDDLE_CLICK,s.RIGHT_CLICK),r=(s.LEFT_CLICK,s.TRANSPARENT_COLOR),a=Math.abs,h=i(16),c=i(35),l=i(23),d=i(7).actions,p=i(38),u=(i(15),new n("pencil")),f=void 0,y=void 0,g=void 0;u.onMouseDown=function(t){if("CANVAS"==t.target.nodeName){this.stroke=new Array(this.layer.width);for(var e=0;e<this.stroke.length;e++)this.stroke[e]=[];this.clicked=!0,f=this.canvas.calculatePosition(t.clientX,t.clientY),y=t.which===o?h.getSecondColor():h.getPrimaryColor(),g=y==r?"cleanAt":"paintAt",$(window).on("mouseup.up",this.onMouseUp.bind(this)),$(window).on("mouseout.leave",this.onMouseLeave.bind(this))}},u.onMouseLeave=function(t){var e=t.toElement||t.relatedTarget;if(e===document.children[0]){var i=this.canvas.calculatePosition(t.clientX,t.clientY);f=i}},u.onMouseMove=function(t){if(this.clicked){var e=this.canvas.calculatePosition(t.clientX,t.clientY);(this.layer.validCord(e)||this.layer.validCord(f))&&(a(f.yo-e.yo)>1||a(f.xo-e.xo)>1?this.lineBetween(f.xo,f.yo,e.xo,e.yo,y,g):this.stroke[e.xo][e.yo]||y===this.layer.getColorPixel(e)||(this.stroke[e.xo][e.yo]=this.layer[g]({x:e.xo,y:e.yo},y))),f=e}},u.onMouseUp=function(t){$(window).off("mouseup.up"),$(window).off("mouseout.leave"),this.clicked&&(this.clicked=!1,f=void 0,l.paintLayer(this.layer.index),this.layer.frame.paint(),c.addUndo(new p(d.PAINT,{layer:this.layer,stroke:this.stroke},0)))},t.exports=function(){return Editor.addTool(u)}}]);