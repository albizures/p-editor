!function(t){function e(r){if(i[r])return i[r].exports;var s=i[r]={exports:{},id:r,loaded:!1};return t[r].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){"use strict";function r(t){var e,i,r,o;return e=new s(t.width,t.height),0===t.index?e.writeHeader():e.firstFrame=!1,console.log(t.transparent),e.setTransparent(t.transparent),e.setRepeat(t.repeat),e.setDelay(t.delay),e.setQuality(t.quality),e.setPreserveColors(t.preserveColors),e.addFrame(t.data),t.last&&e.finish(),t.globalPalette===!0&&(t.globalPalette=e.getGlobalPalette()),r=e.stream(),t.data=r.pages,t.cursor=r.cursor,t.pageSize=r.constructor.pageSize,t.canTransfer?(o=function(){var e,r,s,o;for(s=t.data,o=[],e=0,r=s.length;r>e;e++)i=s[e],o.push(i.buffer);return o}(),self.postMessage(t,o)):self.postMessage(t)}const s=i(1);self.onmessage=function(t){return r(t.data)}},function(t,e,i){"use strict";function r(){this.page=-1,this.pages=[],this.newPage()}function s(t,e){this.width=~~t,this.height=~~e,this.transparent=null,this.transIndex=0,this.repeat=-1,this.delay=0,this.image=null,this.pixels=null,this.indexedPixels=null,this.colorDepth=null,this.colorTab=null,this.usedEntry=new Array,this.palSize=7,this.dispose=-1,this.firstFrame=!0,this.sample=10,this.out=new r}var o=i(2),n=i(3),a=i(4);r.pageSize=4096,r.charMap={};for(var h=0;256>h;h++)r.charMap[h]=String.fromCharCode(h);r.prototype.newPage=function(){this.pages[++this.page]=new Uint8Array(r.pageSize),this.cursor=0},r.prototype.getData=function(){for(var t="",e=0;e<this.pages.length;e++)for(var i=0;i<r.pageSize;i++)t+=r.charMap[this.pages[e][i]];return t},r.prototype.writeByte=function(t){this.cursor>=r.pageSize&&this.newPage(),this.pages[this.page][this.cursor++]=t},r.prototype.writeUTFBytes=function(t){for(var e=t.length,i=0;e>i;i++)this.writeByte(t.charCodeAt(i))},r.prototype.writeBytes=function(t,e,i){for(var r=i||t.length,s=e||0;r>s;s++)this.writeByte(t[s])},s.prototype.setDelay=function(t){this.delay=Math.round(t/10)},s.prototype.setFrameRate=function(t){this.delay=Math.round(100/t)},s.prototype.setDispose=function(t){t>=0&&(this.dispose=t)},s.prototype.setRepeat=function(t){this.repeat=t},s.prototype.setTransparent=function(t){this.transparent=t},s.prototype.setPreserveColors=function(t){this.preserveColors=t},s.prototype.addFrame=function(t){this.image=t,this.getImagePixels(),this.analyzePixels(),this.firstFrame&&(this.writeLSD(),this.writePalette(),this.repeat>=0&&this.writeNetscapeExt()),this.writeGraphicCtrlExt(),this.writeImageDesc(),this.firstFrame||this.writePalette(),this.writePixels(),this.firstFrame=!1},s.prototype.finish=function(){this.out.writeByte(59)},s.prototype.setQuality=function(t){1>t&&(t=1),this.sample=t},s.prototype.writeHeader=function(){this.out.writeUTFBytes("GIF89a")},s.prototype.analyzePixels=function(){var t,e=this.pixels.length,i=e/3,r=0;if(this.indexedPixels=new Uint8Array(i),this.preserveColors){var s=this.toRGBComponents(this.transparent);t=new n(this.pixels,this.sample,s)}else t=new o(this.pixels,this.sample);t.buildColormap(),this.colorTab=t.getColormap();for(var a=0;i>a;a++){var h=t.lookupRGB(255&this.pixels[r++],255&this.pixels[r++],255&this.pixels[r++]);this.usedEntry[h]=!0,this.indexedPixels[a]=h}this.pixels=null,this.colorDepth=8,this.palSize=7,null!==this.transparent&&(this.transIndex=this.findClosest(this.transparent,!0))},s.prototype.toRGBComponents=function(t){var e=null;return t&&(e={r:(16711680&t)>>16,g:(65280&t)>>8,b:255&t}),e},s.prototype.indexPixels=function(t){var e=this.pixels.length/3,i=0;this.indexedPixels=new Uint8Array(e);for(var r=0;e>r;r++){var s=this.findClosestRGB(255&this.pixels[i++],255&this.pixels[i++],255&this.pixels[i++]);this.usedEntry[s]=!0,this.indexedPixels[r]=s}},s.prototype.findClosest=function(t){var e=(16711680&t)>>16,i=(65280&t)>>8,r=255&t,s=0,o=16777216,n=this.colorTab.length;if(null===this.colorTab)return-1;for(var a=0;n>a;){var h=e-(255&this.colorTab[a++]),p=i-(255&this.colorTab[a++]),l=r-(255&this.colorTab[a]),u=h*h+p*p+l*l,f=parseInt(a/3),c=this.preserveColors||this.usedEntry[f];c&&o>u&&(o=u,s=f),a++}return s},s.prototype.getImagePixels=function(){var t=this.width,e=this.height,i=this.image,r=0;this.pixels=new Uint8Array(t*e*3);for(var s=0;e>s;s++)for(var o=0;t>o;o++){var n=s*t*4+4*o;this.pixels[r++]=i[n],this.pixels[r++]=i[n+1],this.pixels[r++]=i[n+2]}},s.prototype.writeGraphicCtrlExt=function(){this.out.writeByte(33),this.out.writeByte(249),this.out.writeByte(4);var t=void 0,e=void 0;null===this.transparent?(t=0,e=0):(t=1,e=2),this.dispose>=0&&(e=7&dispose),e<<=2,this.out.writeByte(0|e|0|t),this.writeShort(this.delay),this.out.writeByte(this.transIndex),this.out.writeByte(0)},s.prototype.writeImageDesc=function(){this.out.writeByte(44),this.writeShort(0),this.writeShort(0),this.writeShort(this.width),this.writeShort(this.height),this.firstFrame?this.out.writeByte(0):this.out.writeByte(128|this.palSize)},s.prototype.writeLSD=function(){this.writeShort(this.width),this.writeShort(this.height),this.out.writeByte(240|this.palSize),this.out.writeByte(0),this.out.writeByte(0)},s.prototype.writeNetscapeExt=function(){this.out.writeByte(33),this.out.writeByte(255),this.out.writeByte(11),this.out.writeUTFBytes("NETSCAPE2.0"),this.out.writeByte(3),this.out.writeByte(1),this.writeShort(this.repeat),this.out.writeByte(0)},s.prototype.writePalette=function(){this.out.writeBytes(this.colorTab);for(var t=768-this.colorTab.length,e=0;t>e;e++)this.out.writeByte(0)},s.prototype.writeShort=function(t){this.out.writeByte(255&t),this.out.writeByte(t>>8&255)},s.prototype.writePixels=function(){var t=new a(this.width,this.height,this.indexedPixels,this.colorDepth);t.encode(this.out)},s.prototype.stream=function(){return this.out},t.exports=s},function(t,e){"use strict";function i(t,e){function i(){E=[],G=new Int32Array(256),R=new Int32Array(s),U=new Int32Array(s),k=new Int32Array(s>>3);var t=void 0,e=void 0;for(t=0;s>t;t++)e=(t<<n+8)/s,E[t]=new Float64Array([e,e,e,0]),U[t]=h/s,R[t]=0}function c(){for(var t=0;s>t;t++)E[t][0]>>=n,E[t][1]>>=n,E[t][2]>>=n,E[t][3]=t}function d(t,e,i,r,s){E[e][0]-=t*(E[e][0]-i)/g,E[e][1]-=t*(E[e][1]-r)/g,E[e][2]-=t*(E[e][2]-s)/g}function x(t,e,i,r,o){for(var n,a,h=Math.abs(e-t),p=Math.min(e+t,s),l=e+1,u=e-1,f=1;p>l||u>h;)a=k[f++],p>l&&(n=E[l++],n[0]-=a*(n[0]-i)/C,n[1]-=a*(n[1]-r)/C,n[2]-=a*(n[2]-o)/C),u>h&&(n=E[u--],n[0]-=a*(n[0]-i)/C,n[1]-=a*(n[1]-r)/C,n[2]-=a*(n[2]-o)/C)}function B(t,e,i){var r,o,h,c,y,d=~(1<<31),w=d,v=-1,x=v;for(r=0;s>r;r++)o=E[r],h=Math.abs(o[0]-t)+Math.abs(o[1]-e)+Math.abs(o[2]-i),d>h&&(d=h,v=r),c=h-(R[r]>>a-n),w>c&&(w=c,x=r),y=U[r]>>l,U[r]-=y,R[r]+=y<<p;return U[v]+=u,R[v]-=f,x}function P(){var t,e,i,r,n,a,h=0,p=0;for(t=0;s>t;t++){for(i=E[t],n=t,a=i[1],e=t+1;s>e;e++)r=E[e],r[1]<a&&(n=e,a=r[1]);if(r=E[n],t!=n&&(e=r[0],r[0]=i[0],i[0]=e,e=r[1],r[1]=i[1],i[1]=e,e=r[2],r[2]=i[2],i[2]=e,e=r[3],r[3]=i[3],i[3]=e),a!=h){for(G[h]=p+t>>1,e=h+1;a>e;e++)G[e]=t;h=a,p=t}}for(G[h]=p+o>>1,e=h+1;256>e;e++)G[e]=o}function F(t,e,i){for(var r,o,n,a=1e3,h=-1,p=G[e],l=p-1;s>p||l>=0;)s>p&&(o=E[p],n=o[1]-e,n>=a?p=s:(p++,0>n&&(n=-n),r=o[0]-t,0>r&&(r=-r),n+=r,a>n&&(r=o[2]-i,0>r&&(r=-r),n+=r,a>n&&(a=n,h=o[3])))),l>=0&&(o=E[l],n=e-o[1],n>=a?l=-1:(l--,0>n&&(n=-n),r=o[0]-t,0>r&&(r=-r),n+=r,a>n&&(r=o[2]-i,0>r&&(r=-r),n+=r,a>n&&(a=n,h=o[3]))));return h}function M(){var i,s=t.length,o=30+(e-1)/3,a=s/(3*e),h=~~(a/r),p=g,l=w,u=l>>y;for(1>=u&&(u=0),i=0;u>i;i++)k[i]=p*((u*u-i*i)*m/(u*u));var f=void 0;A>s?(e=1,f=3):f=s%S!==0?3*S:s%b!==0?3*b:s%I!==0?3*I:3*T;var c=void 0,P=void 0,C=void 0,F=void 0,M=0;for(i=0;a>i;)if(c=(255&t[M])<<n,P=(255&t[M+1])<<n,C=(255&t[M+2])<<n,F=B(c,P,C),d(p,F,c,P,C),0!==u&&x(u,F,c,P,C),M+=f,M>=s&&(M-=s),i++,0===h&&(h=1),i%h===0)for(p-=p/o,l-=l/v,u=l>>y,1>=u&&(u=0),F=0;u>F;F++)k[F]=p*((u*u-F*F)*m/(u*u))}function z(){i(),M(),c(),P()}function D(){var t,e,i=[],r=[],o=0;for(t=0;s>t;t++)r[E[t][3]]=t;for(e=0;s>e;e++){var n=r[e];i[o++]=E[n][0],i[o++]=E[n][1],i[o++]=E[n][2]}return i}var E=void 0,G=void 0,R=void 0,U=void 0,k=void 0;this.buildColormap=z,this.getColormap=D,this.lookupRGB=F}var r=100,s=256,o=s-1,n=4,a=16,h=1<<a,p=10,l=10,u=h>>l,f=h<<p-l,c=s>>3,y=6,d=1<<y,w=c*d,v=30,x=10,g=1<<x,B=8,m=1<<B,P=x+B,C=1<<P,S=499,b=491,I=487,T=503,A=3*T;t.exports=i},function(t,e){"use strict";function i(t,e,i){return[t,e,i].join(".")}function r(t,e,i){this.pixels=t,this.palette=[],this.paletteIndex={},this.transparent=i,console.info(this.transparent)}r.prototype.getColormap=function(){return this.palette},r.prototype.buildColormap=function(){for(var t=this.pixels.length/3,e=0,i=0;t>i;i++){var r=this.pixels[e++],s=this.pixels[e++],o=this.pixels[e++];this.addColorToPalette(r,s,o)}this.transparent&&this.addColorToPalette(this.transparent.r,this.transparent.g,this.transparent.b)},r.prototype.addColorToPalette=function(t,e,r){var s=i(t,e,r);this.paletteIndex.hasOwnProperty(s)||(this.palette.push(t),this.palette.push(e),this.palette.push(r),this.paletteIndex[s]=this.palette.length/3-1)},r.prototype.lookupRGB=function(t,e,r){return this.paletteIndex[i(t,e,r)]},t.exports=r},function(t,e){"use strict";function i(t,e,i,l){function u(t,e){T[m++]=t,m>=254&&w(e)}function f(t){c(h),z=S+2,D=!0,g(S,t)}function c(t){for(var e=0;t>e;++e)A[e]=-1}function y(t,e){var i,r,s,p,l,u,y;for(C=t,D=!1,o=C,P=v(o),S=1<<t-1,b=S+1,z=S+2,m=0,p=x(),y=0,i=h;65536>i;i*=2)++y;y=8-y,u=h,c(u),g(S,e);t:for(;(r=x())!=n;)if(i=(r<<a)+p,s=r<<y^p,A[s]!==i){if(A[s]>=0){l=u-s,0===s&&(l=1);do if((s-=l)<0&&(s+=u),A[s]===i){p=F[s];continue t}while(A[s]>=0)}g(p,e),p=r,1<<a>z?(F[s]=z++,A[s]=i):f(e)}else p=F[s];g(p,e),g(b,e)}function d(i){i.writeByte(I),r=t*e,s=0,y(I+1,i),i.writeByte(0)}function w(t){m>0&&(t.writeByte(m),t.writeBytes(T,0,m),m=0)}function v(t){return(1<<t)-1}function x(){if(0===r)return n;--r;var t=i[s++];return 255&t}function g(t,e){for(B&=p[M],M>0?B|=t<<M:B=t,M+=o;M>=8;)u(255&B,e),B>>=8,M-=8;if((z>P||D)&&(D?(P=v(o=C),D=!1):(++o,P=o==a?1<<a:v(o))),t==b){for(;M>0;)u(255&B,e),B>>=8,M-=8;w(e)}}var B,m,P,C,S,b,I=Math.max(2,l),T=new Uint8Array(256),A=new Int32Array(h),F=new Int32Array(h),M=0,z=0,D=!1;this.encode=d}var r,s,o,n=-1,a=12,h=5003,p=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];t.exports=i}]);